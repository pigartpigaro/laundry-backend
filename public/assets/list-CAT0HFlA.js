import{aW as n,ac as o}from"./index-C65Hd5S6.js";import{n as l,a as p}from"./notifs-C5sbblO4.js";const g=n("master-pelanggan-store",{state:()=>({meta:null,items:[],inisial:[],isError:!1,loading:!1,params:{q:null,page:0,per_page:15}}),actions:{async getList(){this.params.page=1,this.isError=!1,this.loading=!0;const s={params:this.params};try{const{data:a}=await o.get("/xy/master/pelanggan/listdata",s);this.meta=a,this.items=a==null?void 0:a.data,this.loading=!1}catch(a){console.log(a),this.isError=!0,this.loading=!1}},loadMore(s,a){this.isError=!1,this.params.page=s;const r={params:this.params};return console.log("load more",s),new Promise(t=>{o.get("/xy/master/pelanggan/listdata",r).then(({data:e})=>{this.meta=e,this.items.push(...e.data),a(),t()}).catch(()=>{this.isError=!0,a(!0),t()})})},async deleteItem(s){var r;this.items=this.items.filter(t=>t.id!==s);const a={id:s};try{if((await o.post("/xy/master/pelanggan/deletedata",a)).status===200){const e=(r=this.items)==null?void 0:r.filter(i=>(i==null?void 0:i.id)!==s);this.items=e,l("Data berhasil dihapus")}}catch(t){console.log("del Brand error",t),p("Terjadi Kesalahan")}}}});export{g as u};
