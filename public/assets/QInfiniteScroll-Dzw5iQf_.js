import{n as z,aH as F,l as w,r as S,a$ as L,c as g,h as b,ax as W,R as G,m as O,b0 as J,b1 as K,al as X,w as y,aC as Y,aB as Z,P as p,b2 as ee,o as te,g as ne,b3 as ie,b4 as N,b5 as D,b6 as H,N as Q,b7 as T,au as re,az as ae}from"./index-C65Hd5S6.js";const A={threshold:0,root:null,rootMargin:"0px"};function k(e,t,s){var f;let i,a,c;typeof s=="function"?(i=s,a=A,c=t.cfg===void 0):(i=s.handler,a=Object.assign({},A,s.cfg),c=t.cfg===void 0||F(t.cfg,a)===!1),t.handler!==i&&(t.handler=i),c===!0&&(t.cfg=a,(f=t.observer)==null||f.unobserve(e),t.observer=new IntersectionObserver(([l])=>{if(typeof t.handler=="function"){if(l.rootBounds===null&&document.body.contains(e)===!0){t.observer.unobserve(e),t.observer.observe(e);return}(t.handler(l,t.observer)===!1||t.once===!0&&l.isIntersecting===!0)&&R(e)}},a),t.observer.observe(e))}function R(e){var s;const t=e.__qvisible;t!==void 0&&((s=t.observer)==null||s.unobserve(e),delete e.__qvisible)}const oe=z({name:"intersection",mounted(e,{modifiers:t,value:s}){const i={once:t.once===!0};k(e,i,s),e.__qvisible=i},updated(e,t){const s=e.__qvisible;s!==void 0&&k(e,s,t.value)},beforeUnmount:R}),ue=w({name:"QIntersection",props:{tag:{type:String,default:"div"},once:Boolean,transition:String,transitionDuration:{type:[String,Number],default:300},ssrPrerender:Boolean,margin:String,threshold:[Number,Array],root:{default:null},disable:Boolean,onVisibility:Function},setup(e,{slots:t,emit:s}){const i=S(L.value===!0?e.ssrPrerender:!1),a=g(()=>e.root!==void 0||e.margin!==void 0||e.threshold!==void 0?{handler:n,cfg:{root:e.root,rootMargin:e.margin,threshold:e.threshold}}:n),c=g(()=>e.disable!==!0&&(L.value!==!0||e.once!==!0||e.ssrPrerender!==!0)),f=g(()=>[[oe,a.value,void 0,{once:e.once}]]),l=g(()=>`--q-transition-duration: ${e.transitionDuration}ms`);function n(v){i.value!==v.isIntersecting&&(i.value=v.isIntersecting,e.onVisibility!==void 0&&s("visibility",i.value))}function o(){if(i.value===!0)return[b("div",{key:"content",style:l.value},O(t.default))];if(t.hidden!==void 0)return[b("div",{key:"hidden",style:l.value},t.hidden())]}return()=>{const v=e.transition?[b(W,{name:"q-transition--"+e.transition},o)]:o();return G(e.tag,{class:"q-intersection"},v,"main",c.value,()=>f.value)}}}),se='<circle cx="15" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="60" cy="15" r="9" fill-opacity=".3"><animate attributeName="r" from="9" to="9" begin="0s" dur="0.8s" values="9;15;9" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from=".5" to=".5" begin="0s" dur="0.8s" values=".5;1;.5" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="105" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite"></animate></circle>',ce=w({name:"QSpinnerDots",props:J,setup(e){const{cSize:t,classes:s}=K(e);return()=>b("svg",{class:s.value,fill:"currentColor",width:t.value,height:t.value,viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg",innerHTML:se})}}),{passive:d}=ee,fe=w({name:"QInfiniteScroll",props:{offset:{type:Number,default:500},debounce:{type:[String,Number],default:100},scrollTarget:X,initialIndex:{type:Number,default:0},disable:Boolean,reverse:Boolean},emits:["load"],setup(e,{slots:t,emit:s}){const i=S(!1),a=S(!0),c=S(null),f=S(null);let l=e.initialIndex,n,o;const v=g(()=>"q-infinite-scroll__loading"+(i.value===!0?"":" invisible"));function m(){if(e.disable===!0||i.value===!0||a.value===!1)return;const r=N(n),u=D(n),h=H(n);e.reverse===!1?Math.round(u+h+e.offset)>=Math.round(r)&&P():Math.round(u)<=e.offset&&P()}function P(){if(e.disable===!0||i.value===!0||a.value===!1)return;l++,i.value=!0;const r=N(n);s("load",l,u=>{a.value===!0&&(i.value=!1,Q(()=>{if(e.reverse===!0){const h=N(n),$=D(n),j=h-r;T(n,$+j)}u===!0?I():c.value&&c.value.closest("body")&&o()}))})}function V(){l=0}function E(){a.value===!1&&(a.value=!0,n.addEventListener("scroll",o,d)),m()}function I(){var r;a.value===!0&&(a.value=!1,i.value=!1,n.removeEventListener("scroll",o,d),(r=o==null?void 0:o.cancel)==null||r.call(o))}function M(){if(n&&a.value===!0&&n.removeEventListener("scroll",o,d),n=re(c.value,e.scrollTarget),a.value===!0){if(n.addEventListener("scroll",o,d),e.reverse===!0){const r=N(n),u=H(n);T(n,r-u)}m()}}function x(r){l=r}function _(r){r=parseInt(r,10);const u=o;o=r<=0?m:ae(m,isNaN(r)===!0?100:r),n&&a.value===!0&&(u!==void 0&&n.removeEventListener("scroll",u,d),n.addEventListener("scroll",o,d))}function C(r){if(q.value===!0){if(f.value===null){r!==!0&&Q(()=>{C(!0)});return}const u=`${i.value===!0?"un":""}pauseAnimations`;Array.from(f.value.getElementsByTagName("svg")).forEach(h=>{h[u]()})}}const q=g(()=>e.disable!==!0&&a.value===!0);y([i,q],()=>{C()}),y(()=>e.disable,r=>{r===!0?I():E()}),y(()=>e.reverse,()=>{i.value===!1&&a.value===!0&&m()}),y(()=>e.scrollTarget,M),y(()=>e.debounce,_);let B=!1;Y(()=>{B!==!1&&n&&T(n,B)}),Z(()=>{B=n?D(n):!1}),p(()=>{a.value===!0&&n.removeEventListener("scroll",o,d)}),te(()=>{_(e.debounce),M(),i.value===!1&&C()});const U=ne();return Object.assign(U.proxy,{poll:()=>{o==null||o()},trigger:P,stop:I,reset:V,resume:E,setIndex:x,updateScrollTarget:M}),()=>{const r=ie(t.default,[]);return q.value===!0&&r[e.reverse===!1?"push":"unshift"](b("div",{ref:f,class:v.value},O(t.loading))),b("div",{class:"q-infinite-scroll",ref:c},r)}}});export{fe as Q,ue as a,ce as b};
