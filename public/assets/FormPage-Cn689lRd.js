import{aW as v,ac as k,c as S,o as b,W as c,a4 as q,Y as y,$ as a,f as i,Z as m,aX as w,a6 as C,a2 as f,aT as Q,aY as x}from"./index-C65Hd5S6.js";import{Q as V}from"./QForm-DoygxfT4.js";import{n as M,u as $}from"./notifs-C5sbblO4.js";import{u as B}from"./list-N0E6enZg.js";const F=v("form-master-satuan-store",{state:()=>({form:{id:null,kodesatuan:null,satuan:null,flag:null},loading:!1}),actions:{initReset(t){if(t)return new Promise(n=>{for(const r in this.form)this.form[r]=t[r];this.form.kodesatuan=t==null?void 0:t.kodesatuan,console.log(this.form),n()});for(const n in this.form)this.form[n]=null},async save(t){return this.loading=!0,new Promise((n,r)=>{k.post("/xy/master/satuan/savedata",this.form).then(({data:s})=>{var o;console.log("saved",s),this.loading=!1;const e=B();t?e!=null&&e.items&&((o=s==null?void 0:s.result)!=null&&o.id)&&(e.items=e.items.map(l=>(l==null?void 0:l.id)===s.result.id?{...l,...s.result}:l)):e.items.unshift(s==null?void 0:s.result),M("Data berhasil disimpan"),this.initReset(null),n(s)}).catch(s=>{this.loading=!1,r(s)})})}}}),P={class:"fit column"},R={class:"col-auto"},D={class:"row items-center q-pa-lg"},N={class:"col-grow"},W={class:"col full-height q-px-lg q-pb-lg"},Y={class:"row q-col-gutter-md justify-around"},z={class:"col-12"},Z={__name:"FormPage",props:{data:{type:Object,default:null}},emits:["back"],setup(t,{emit:n}){const r=n,s=$(),e=S(()=>s.screen.lt.sm),o=F(),l=t;b(()=>{o.initReset(l.data)});function d(){o.save(l.data)}return(E,u)=>{const _=c("app-btn-back"),h=c("app-input"),g=c("app-btn");return y(),q("div",P,[a("div",R,[a("div",D,[a("div",N,[i(_,{onClick:u[0]||(u[0]=p=>r("back"))})]),u[2]||(u[2]=a("div",{class:"col-auto"},null,-1))])]),a("div",W,[i(x,{flat:"",class:"col full-height"},{default:m(()=>[i(V,{class:"full-height",onSubmit:d},{default:m(()=>[i(w,{class:"full-height q-pa-lg scroll"},{default:m(()=>[a("div",Y,[a("div",{class:C([`col-${e.value?12:6}`,"row q-col-gutter-md"])},[i(h,{class:"col-12",modelValue:f(o).form.satuan,"onUpdate:modelValue":u[1]||(u[1]=p=>f(o).form.satuan=p),label:"Data Satuan",valid:{required:!1}},null,8,["modelValue"]),a("div",z,[i(Q,{class:"q-my-md"}),i(g,{loading:f(o).loading,type:"submit",dense:!1,label:"Simpan"},null,8,["loading"])])],2)])]),_:1})]),_:1})]),_:1})])])}}};export{Z as default};
