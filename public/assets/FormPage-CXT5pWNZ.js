import{aW as k,ac as v,c as b,o as q,W as u,a4 as S,Y as y,$ as i,f as n,Z as m,aX as w,a6 as C,a2 as f,aT as Q,aY as x}from"./index-C65Hd5S6.js";import{Q as V}from"./QForm-DoygxfT4.js";import{n as M,u as $}from"./notifs-C5sbblO4.js";import{u as B}from"./list-Cxy2hue2.js";const F=k("form-master-kategori-store",{state:()=>({form:{id:null,kategori:null,kodekategori:null,flag:null},loading:!1}),actions:{initReset(e){if(e)return new Promise(a=>{for(const r in this.form)this.form[r]=e[r];this.form.kodekategori=e==null?void 0:e.kodekategori,console.log(this.form),a()});for(const a in this.form)this.form[a]=null},async save(e){return this.loading=!0,new Promise((a,r)=>{v.post("/xy/master/kategori/savedata",this.form).then(({data:s})=>{var t;console.log("saved",s),this.loading=!1;const o=B();e?o!=null&&o.items&&((t=s==null?void 0:s.result)!=null&&t.id)&&(o.items=o.items.map(l=>(l==null?void 0:l.id)===s.result.id?{...l,...s.result}:l)):o.items.unshift(s==null?void 0:s.result),M("Data berhasil disimpan"),this.initReset(null),a(s)}).catch(s=>{this.loading=!1,r(s)})})}}}),P={class:"fit column"},R={class:"col-auto"},D={class:"row items-center q-pa-lg"},K={class:"col-grow"},N={class:"col full-height q-px-lg q-pb-lg"},W={class:"row q-col-gutter-md justify-around"},Y={class:"col-12"},X={__name:"FormPage",props:{data:{type:Object,default:null}},emits:["back"],setup(e,{emit:a}){const r=a,s=$(),o=b(()=>s.screen.lt.sm),t=F(),l=e;q(()=>{t.initReset(l.data)});function d(){t.save(l.data)}return(z,c)=>{const g=u("app-btn-back"),_=u("app-input"),h=u("app-btn");return y(),S("div",P,[i("div",R,[i("div",D,[i("div",K,[n(g,{onClick:c[0]||(c[0]=p=>r("back"))})]),c[2]||(c[2]=i("div",{class:"col-auto"},null,-1))])]),i("div",N,[n(x,{flat:"",class:"col full-height"},{default:m(()=>[n(V,{class:"full-height",onSubmit:d},{default:m(()=>[n(w,{class:"full-height q-pa-lg scroll"},{default:m(()=>[i("div",W,[i("div",{class:C([`col-${o.value?12:6}`,"row q-col-gutter-md"])},[n(_,{class:"col-12",modelValue:f(t).form.kategori,"onUpdate:modelValue":c[1]||(c[1]=p=>f(t).form.kategori=p),label:"Data kategori",valid:{required:!1}},null,8,["modelValue"]),i("div",Y,[n(Q,{class:"q-my-md"}),n(h,{loading:f(t).loading,type:"submit",dense:!1,label:"Simpan"},null,8,["loading"])])],2)])]),_:1})]),_:1})]),_:1})])])}}};export{X as default};
